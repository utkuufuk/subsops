@startuml

skinparam sequenceMessageAlign center
skinparam backgroundColor white
skinparam EntityBorderColor Black

skinparam sequence {
ActorBorderColor black
LifeLineBorderColor black
ParticipantBorderColor black
ParticipantFontColor black
ActorFontColor Black
}
hide footbox

actor User as user #e24ad3
participant "Subscribe Page" as subscribePage #orange
participant "Confirm Page" as confirmPage #70d070
entity "Subscribe Function" as subscribeFun #yellow
database "Cloud Firestore" as firestore #gray
actor Admin as admin #blue

activate user #e24ad3
user -[#e24ad3]> subscribePage : Submit Info\n""(name, email)""
activate subscribePage #orange
subscribePage -[#orange]> subscribePage : Validate Info\n""(name, email)""
alt IF VALID
    subscribePage -[#orange]>> subscribeFun : Create New Subscriber\n""(name, email)""
    activate subscribeFun #yellow
    subscribePage -[#orange]> confirmPage : Redirect
    deactivate subscribePage
    activate confirmPage #70d070
    confirmPage -[#green]> user : Inform About Confirmation Email
    deactivate confirmPage
    deactivate user
    subscribeFun -[#dfc000]> subscribeFun : Validate Info\n""(name, email)""
    alt IF INVALID
        subscribeFun -[#dfc000]>> admin : Send Warning Email
        activate admin #blue
        deactivate admin
    else IF VALID
        subscribeFun -[#dfc000]>> firestore : Create New Subscriber\n""(id)""
        activate firestore #gray
        deactivate firestore
        subscribeFun -[#dfc000]>> user : Send Confirmation Email\n""(id, name, email)""
        activate user #e24ad3
        deactivate user
        subscribeFun -[#dfc000]>> admin : Send New Subscriber Notification Email
        activate admin #blue
        deactivate subscribeFun
        deactivate admin
    end
end
@enduml
